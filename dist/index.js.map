{"version":3,"sources":["../src/index.ts","../src/types/_string.ts","../src/Canvas/Builder.ts"],"sourcesContent":["export * from \"./Canvas/Builder\";\n\nexport * from \"./types/_string\";\n\n/**\n * The current version that you are currently using.\n *\n * Note to developers: This needs to explicitly be `string` so it is not typed as a \"const string\" that gets injected by esbuild\n */\n// eslint-disable-next-line @typescript-eslint/no-inferrable-types\nexport const version: string = \"0.0.0\";\n","export enum Templates {\n  WelcomeDefault = \"https://raw.githubusercontent.com/Rayandevs/canvas-assets/refs/heads/main/Welcome%20Card%20Design%20%231.png\",\n  FarewellDefault = \"https://raw.githubusercontent.com/Rayandevs/canvas-assets/refs/heads/main/Farewell%20Design%20%231.png\",\n}\n","import { Templates } from \"../types/_string\";\nimport { CanvasBuilderOptions } from \"../types/canvas\";\nimport napi from \"@napi-rs/canvas\";\n\ninterface CanvaBuilderData {\n  filepath: string;\n}\n\ninterface CanvaBuilderRequired {\n  username: string;\n  members: number | string;\n  avatarURL: string;\n}\n\nexport class CanvaBuilder {\n  public canvas: napi.Canvas;\n  public options: CanvaBuilderRequired | null;\n  private data: CanvaBuilderData;\n\n  public constructor(options: CanvasBuilderOptions) {\n    this.options = null;\n    this.data = { filepath: \"Unknown\" };\n    napi.GlobalFonts.registerFromPath(\"./Yonoy.ttf\", \"Yonoy\");\n\n    const _info = this.build(options);\n    this.canvas = napi.createCanvas(_info.w, _info.h);\n  }\n\n  public set(required: CanvaBuilderRequired) {\n    this.options = required;\n    return this;\n  }\n\n  public async draw(canvas: napi.Canvas) {\n    if (!this.options)\n      throw new Error(\"Options are required, call passOptions()\");\n\n    const width = canvas.width;\n    const height = canvas.height;\n    const centerY = height / 2;\n    const centerX = width / 2;\n    const radius = 250;\n\n    const ctx = canvas.getContext(\"2d\");\n    const background = await napi.loadImage(this.data.filepath);\n    ctx.drawImage(background, 0, 0, width, height);\n\n    // Draw username\n    ctx.fillStyle = \"#f2f2f2\";\n    ctx.font = \"bold 120px Yonoy\";\n    ctx.fillText(this.options.username, centerX - 220, centerY + 55);\n\n    ctx.fillStyle = \"#f2f2f2\";\n    ctx.font = \"bold 50px Yonoy\";\n    ctx.fillText('#' + this.options.members.toString(), centerX + 500, centerY - 35);\n\n    ctx.beginPath();\n    ctx.arc(radius + 34, centerY, radius, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.clip();\n\n    const avatar = await napi.loadImage(this.options.avatarURL);\n    ctx.drawImage(avatar, 0, centerY - radius, radius * 2, radius * 2);\n\n    return canvas.toBuffer(\"image/jpeg\")\n  }\n\n  private figureWHDraw(template: string) {\n    // (Template) Default values are the same\n    if (template === Templates.WelcomeDefault) {\n      this.data.filepath = Templates.WelcomeDefault;\n      return { w: 1772, h: 633 };\n    } else if (template === Templates.FarewellDefault) {\n      this.data.filepath = Templates.FarewellDefault;\n      return { w: 1772, h: 633 };\n    }\n    return { w: 0, h: 0 };\n  }\n\n  private build(options: CanvasBuilderOptions) {\n    if (!options?.template)\n      throw new Error(\"A template option is required at this moment.\");\n    return this.figureWHDraw(options.template);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,IAAK,YAAL,kBAAKA,eAAL;AACL,EAAAA,WAAA,oBAAiB;AACjB,EAAAA,WAAA,qBAAkB;AAFR,SAAAA;AAAA,GAAA;;;ACEZ,oBAAiB;AAYV,IAAM,gBAAN,MAAM,cAAa;AAAA,EAKjB,YAAY,SAA+B;AAChD,SAAK,UAAU;AACf,SAAK,OAAO,EAAE,UAAU,UAAU;AAClC,kBAAAC,QAAK,YAAY,iBAAiB,eAAe,OAAO;AAExD,UAAM,QAAQ,KAAK,MAAM,OAAO;AAChC,SAAK,SAAS,cAAAA,QAAK,aAAa,MAAM,GAAG,MAAM,CAAC;AAAA,EAClD;AAAA,EAEO,IAAI,UAAgC;AACzC,SAAK,UAAU;AACf,WAAO;AAAA,EACT;AAAA,EAEA,MAAa,KAAK,QAAqB;AACrC,QAAI,CAAC,KAAK;AACR,YAAM,IAAI,MAAM,0CAA0C;AAE5D,UAAM,QAAQ,OAAO;AACrB,UAAM,SAAS,OAAO;AACtB,UAAM,UAAU,SAAS;AACzB,UAAM,UAAU,QAAQ;AACxB,UAAM,SAAS;AAEf,UAAM,MAAM,OAAO,WAAW,IAAI;AAClC,UAAM,aAAa,MAAM,cAAAA,QAAK,UAAU,KAAK,KAAK,QAAQ;AAC1D,QAAI,UAAU,YAAY,GAAG,GAAG,OAAO,MAAM;AAG7C,QAAI,YAAY;AAChB,QAAI,OAAO;AACX,QAAI,SAAS,KAAK,QAAQ,UAAU,UAAU,KAAK,UAAU,EAAE;AAE/D,QAAI,YAAY;AAChB,QAAI,OAAO;AACX,QAAI,SAAS,MAAM,KAAK,QAAQ,QAAQ,SAAS,GAAG,UAAU,KAAK,UAAU,EAAE;AAE/E,QAAI,UAAU;AACd,QAAI,IAAI,SAAS,IAAI,SAAS,QAAQ,GAAG,KAAK,KAAK,GAAG,IAAI;AAC1D,QAAI,UAAU;AACd,QAAI,KAAK;AAET,UAAM,SAAS,MAAM,cAAAA,QAAK,UAAU,KAAK,QAAQ,SAAS;AAC1D,QAAI,UAAU,QAAQ,GAAG,UAAU,QAAQ,SAAS,GAAG,SAAS,CAAC;AAEjE,WAAO,OAAO,SAAS,YAAY;AAAA,EACrC;AAAA,EAEQ,aAAa,UAAkB;AAErC,QAAI,kJAAuC;AACzC,WAAK,KAAK;AACV,aAAO,EAAE,GAAG,MAAM,GAAG,IAAI;AAAA,IAC3B,WAAW,6IAAwC;AACjD,WAAK,KAAK;AACV,aAAO,EAAE,GAAG,MAAM,GAAG,IAAI;AAAA,IAC3B;AACA,WAAO,EAAE,GAAG,GAAG,GAAG,EAAE;AAAA,EACtB;AAAA,EAEQ,MAAM,SAA+B;AAC3C,QAAI,EAAC,mCAAS;AACZ,YAAM,IAAI,MAAM,+CAA+C;AACjE,WAAO,KAAK,aAAa,QAAQ,QAAQ;AAAA,EAC3C;AACF;AAtE0B;AAAnB,IAAM,eAAN;;;AFJA,IAAM,UAAkB;","names":["Templates","napi"]}